<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Afrika No Dako</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      overflow: hidden;
    }
    #gameContainer {
      position: relative;
      width: 100vw;
      height: 100vh;
      background-color: lightblue;
      overflow: hidden;
    }
    .point {
      width: 160px;
      height: 160px;
      background-color: black;
      position: absolute;
      border-radius: 50%;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 36px;
      font-weight: bold;
      color: orangered;
    }
    #water {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 48px;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <div id="score">Score: 0</div>
    <div id="water">üí¶</div>
  </div>
  <script>
    const gameContainer = document.getElementById('gameContainer');
    const scoreElement = document.getElementById('score');
    const water = document.getElementById('water');
    const waterX = gameContainer.clientWidth / 2 - 24; // Ajuste la position du centre du jeu
    const waterY = gameContainer.clientHeight - 84; // Ajuste la position du centre du jeu

    let score = 0;
    let baseInterval = 2000;
    const minInterval = 300; // D√©finir l'intervalle minimum √† 300 ms
    const intervalDecayRate = 0.95; // Facteur de r√©duction de l'intervalle

    function createPoint() {
      const point = document.createElement('div');
      point.classList.add('point');
      point.style.top = '0px';
      point.style.left = Math.random() * (gameContainer.clientWidth - 160) + 'px';
      gameContainer.appendChild(point);

      let speed = Math.random() * 3 + 2;
      let directionX = (waterX - parseFloat(point.style.left)) / (gameContainer.clientHeight / speed);
      
      point.isRemoved = false; // Ajout d'une propri√©t√© pour suivre l'√©tat de suppression

      function movePoint() {
        if (point.isRemoved) return; // Ne pas continuer si le point est supprim√©
        
        const currentTop = parseFloat(point.style.top);
        const currentLeft = parseFloat(point.style.left);

        if (currentTop + speed > gameContainer.clientHeight) {
          alert('Game Over! Votre score est : ' + score);
          location.reload();
        } else {
          point.style.top = currentTop + speed + 'px';
          point.style.left = currentLeft + directionX + 'px';
          requestAnimationFrame(movePoint);
        }
      }

      point.addEventListener('click', () => {
        score++;
        scoreElement.textContent = 'Score: ' + score;
        point.isRemoved = true; // Marquer le point comme supprim√©
        point.remove();
        adjustInterval(); // Ajuster l'intervalle apr√®s chaque clic
      });

      requestAnimationFrame(movePoint);
    }

    function adjustInterval() {
      let newInterval = Math.max(baseInterval * Math.pow(intervalDecayRate, score), minInterval); // R√©duction exponentielle de l'intervalle avec un minimum
      clearInterval(intervalId);
      intervalId = setInterval(spawnPoints, newInterval); // Appliquer le nouvel intervalle
    }

    function spawnPoints() {
      const additionalProb = Math.floor(score / 10) * 0.01; // Augmentation de la probabilit√© pour 3 points pour chaque tranche de 10 points
      const chance = Math.random();
      if (chance < 0.01 + additionalProb) {
        createPoint(); createPoint(); createPoint(); // Probabilit√© d'apparition de 3 points
      } else if (chance < 0.30 + additionalProb) {
        createPoint(); createPoint(); // Probabilit√© d'apparition de 2 points
      } else {
        createPoint(); // Probabilit√© d'apparition de 1 point
      }
    }

    function checkCollision() {
      const points = document.getElementsByClassName('point');
      for (const point of points) {
        const currentTop = parseFloat(point.style.top);
        if (!point.isRemoved && currentTop + point.clientHeight > gameContainer.clientHeight) {
          alert('Game Over! Votre score est : ' + score);
          location.reload();
        }
      }
    }

    function validateSpawn() {
      const maxPoints = 3 + Math.floor(score / 10); // Limite le nombre maximal de points √† l'√©cran en fonction du score
      if (document.getElementsByClassName('point').length < maxPoints) {
        spawnPoints();
      }
    }

    let intervalId = setInterval(validateSpawn, baseInterval);

    setInterval(checkCollision, 50); // V√©rifie les collisions toutes les 50ms
  </script>
</body>
</html>
